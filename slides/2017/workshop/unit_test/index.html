<!DOCTYPE html>
<html lang="ja">
  <head>
    <title>フロントエンドのユニットテスト</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../../shower/themes/ribbon/styles/screen-16x10.css">
    <link rel="stylesheet" href="../../../assets/style.css">
    <link rel="shortcut icon" href="../../../assets/favicon.ico">
  </head>
  <body class="shower list">
    <header class="caption">
      <h1>フロントエンドのユニットテスト</h1>
      <p class="desc">
        Click：　スライドスタート<br>
        Enter：　次へ進む<br>
        →, ↓：　次へ進む<br>
        ←, ↑：　前へ戻る<br>
        ESC：　一覧へ戻る
      </p>
    </header>
    <section class="slide" id="cover">
      <h2>
        フロントエンドの<br>ユニットテスト
      </h2>
      <p>
        2017/06/09　@レプラホーン本社<br>
      </p>
    </section>

    <section class="slide">
      <h2>自己紹介</h2>
      <pre>
<code>var my_info = {
  <key>name</key>: <value>'Kiyohito Kuwahara'</value>,
  <key>twitter</key>: <value>'@kuwahara_ngv2'（たまに変わります）</value>,
  <key>github</key> : <value>'k-kuwahara'</value>,
  <key>qiita</key>  : <value>'@clown0082'</value>,
  <key>skill</key>  : <value>'PHP, CodeIgniter, JS, Riot, Angular'</value>,
  <key>workplace</key>: <value>'Leprachaun Corp.'</value>
}</code>
      </pre>
    </section>

    <section class="slide">
      <h2>アジェンダ</h2>
      <ol>
        <li>コンソールでのテスト</li>
        <li>フレームワーク（Mocha）の導入</li>
        <li>Node.jsで実行</li>
        <li>karmaの導入</li>
        <li>テストケースのバンドル</li>
      </ol>
      <p>※ 何かあれが随時聞いていただいて問題ありません。</p>
    </section>

    <section class="slide">
      <h2>今回使うサンプルアプリ</h2>
      よくあるログインフォームです。<br>
      こんなやつ→
      <p class="fright"><img src="img/demo.png"></p>
      <ul class="mt20">
        <li><a href="https://github.com/k-kuwahara/k-kuwahara.github.io/tree/master/slides/2017/workshop/unit_test/demo" target="_blank">ソース</a></li>
        <li><a href="https://k-kuwahara.github.io/slides/2017/workshop/unit_test/demo/" target="_blank">デモ</a></li>
      </ul>
      <style>
         img {
            border: 1px solid #ccc;
         }
      </style>
    </section>

    <section class="slide center-text">
      <h2 class="shout">1. コンソールでのテスト</h2>
    </section>

    <section class="slide center-text">
      <h2 class="shout">2. フレームワーク（Mocha）<br>の導入</h2>
    </section>

    <section class="slide center-text">
      <h2 class="shout">3. Node.jsで実行</h2>
    </section>

    <section class="slide center-text">
      <h2 class="shout">4. karmaの導入</h2>
    </section>

    <section class="slide center-text">
      <h2 class="shout">5. テストケースのバンドル</h2>
    </section>

    <section class="slide center-text">
      <h3 class="">以下のコードを実行してみましょう！</h3>
      <pre>
         <code>  <key>let</key> hoge = <value>'hoge'</value></code>
        <code>  hoge = <value>'fuga'</value> <comment>// => 問題なし</comment></code>
        <code>  </code>
        <code>  <key>const</key> foo = <value>'bar'</value></code>
        <code>  foo = <value>'bar'</value> <error>// => Uncaught TypeError</error></code>

      </pre>
    </section>

    <section class="slide center-text">
      <h2 class="">アロー関数（Arrow functions）</h2>
      <pre>
        <code>  <comment>// bad pattern</comment></code>
        <code>  <key>var</key> <value>hoge</value> = function(x) {</code>
        <code>     return 2 * x</code>
        <code>  }</code>
        <code>  <comment>// good pattern</comment></code>
        <code>  <key>const</key> <value>hoge</value> = (x) => {   <comment>// もうfunctionはいらない</comment></code>
        <code>     return 2 * x</code>
        <code>  }</code>
      </pre>
    </section>

    <section class="slide center-text">
      <h3 class="">バベり方は大まかに以下の3つかと。</h3>
      <ol>
        <li>cliを使う (babel-cli, bubleなど)</li>
        <li>タスクランナーを使う (Gulp, Gruntなど)</li>
        <li>バンドラーを使う (Webpack2, Rollupなど)</li>
      </ol>
      <p class="codicil">2, 3はビルドと一緒にバベる形です</p>
    </section>

    <section class="slide center-text">
      <h3 class="">今回は以下の3つをご紹介。</h3>
      <ol>
        <li>cliを使う (babel-cli, <span class="assert">buble</span>など)</li>
        <li>タスクランナーを使う (<span class="assert">Gulp</span>, Gruntなど)</li>
        <li>バンドラーを使う (<span class="assert">Webpack2</span>, Rollupなど)</li>
      </ol>
      <p class="codicil">※ 他は私が触ったことないため…</p>
    </section>

    <section class="slide center-text">
      <h3 class="shout">1. bubleでバベる</h3>
    </section>

    <section class="slide center-text">
      <h3 class="">1. bubleでバベる</h3>
      <p class="f30">「余計なこと考えずに、とにかくhoge.jsをES5にコンパイルしたいんじゃぁあああ！」という方向けですw コマンドラインから実行できるので試してみましょう！</p>

      <pre class="">
        <code>  <comment>// bubleのグローバルインストール</comment></code>
        <code>  $ <key>npm</key> i -g <value>buble</value></code>
      </pre>
    </section>

    <section class="slide center-text">
      <h3 class="">1. bubleでバベる</h3>
      <p class="f30">先程試したクラス構文を適当なjsファイルを作成し、コピペして保存して下さい。完了したら、以下のコマンドを実行してみましょう！</p>
      <pre class="">
        <code>  <comment>// コンパイルの実行</comment></code>
        <code>  $ <key>buble</key> <value>hoge.js</value> -o fuga.js</code>
      </pre>
    </section>

    <section class="slide center-text">
      <h3 class="shout">2. gulpでバベる</h3>
    </section>

    <section class="slide center-text">
      <h3 class="">2. gulpでバベる</h3>
      <p class="f30">今度は、「ファイルの変更を検知し自動でES5に変換する」方法です。以下を実行して下さい。</p>
      <pre class="">
        <code>  <comment>// package.jsonがない人</comment></code>
        <code>  $ <key>npm</key> <value>init</value></code>
        <code>  <comment>// 必要なモジュールのインストール</comment></code>
        <code>  $ <key>npm</key> i -D <value>gulp gulp-buble</value></code>
      </pre>
    </section>

    <section class="slide center-text">
      <h3 class="">2. gulpでバベる</h3>
      <p class="f30">ローカルでもグローバルでもインストールが完了しましたら、次はgulpfile.jsを作成し、gulp.taskを設定します。</p>
      <p class="f30">コード例→ <a href="https://gist.github.com/k-kuwahara/a9e93d131a4a01325cd7b2c7be306a36#file-gulpfile-js" target="_blank">gulpfile.jsの例</a></p>
    </section>

    <section class="slide center-text">
      <h3 class="">2. gulpでバベる</h3>
      <p class="f30">設定が完了しましたら、package.jsonのscriptsに実行用のコマンドを設定します。</p>
      <pre class="">
        <code>  <comment>// package.jsonのscripts</comment></code>
        <code>  <key>"scripts"</key>: {</code>
        <code>    <key>"gulp"</key>: <value>"gulp" </value></code>
        <code>  } </code>
      </pre>
    </section>

    <section class="slide center-text">
      <h3 class="">2. gulpでバベる</h3>
      <p class="f30">最後に実行してみましょう！</p>
      <pre class="">
        <code>  <comment>// gulpの起動</comment></code>
        <code>  $ <key>npm</key> run <value>gulp</value> watch (←これはなくても良い)</code>
        <code>  <comment>// [20:32:20] Starting 'watch'...</comment></code>
        <code>  <comment>// [20:32:20] Finished 'watch' after 26 ms</comment></code>
        <code>  <comment>// これ以降勝手にコンパイルが走ります</comment></code>
      </pre>
    </section>

    <section class="slide center-text">
      <h3 class="shout">3. webpack2でバベる</h3>
    </section>

    <section class="slide center-text">
      <h3 class="">3. webpack2でバベる</h3>
      <p class="f30">gulpと同様に「ファイルの変更を検知し自動でES5に変換する」方法です。以下を実行して下さい。</p>

      <pre class="">
        <code>  <comment>// package.jsonがない人</comment></code>
        <code>  $ <key>npm</key> <value>init</value></code>
        <code>  <comment>// 必要なモジュールのインストール</comment></code>
        <code>  $ <key>npm</key> i <value>webpack buble-loader</value></code>
      </pre>
    </section>

    <section class="slide center-text">
      <h3 class="">3. webpack2でバベる</h3>
      <p class="f30">ローカルでもグローバルでもインストールが完了しましたら、次はwebpack.config.jsを作成し、バンドルの設定をします。</p>
      <p class="f30">コード例→ <a href="https://gist.github.com/k-kuwahara/a9e93d131a4a01325cd7b2c7be306a36#file-webpack-config-js" target="_blank">webpack.config.jsの例</a></p>
    </section>

    <section class="slide center-text">
      <h3 class="">3. webpack2でバベる</h3>
      <p class="f30">設定が完了しましたら、package.jsonのscriptsに実行用のコマンドを設定します。</p>
      <pre class="">
        <code>  <comment>// package.jsonのscripts</comment></code>
        <code>  <key>"scripts"</key>: {</code>
        <code>    <key>"build"</key>: <value>"webpack -w (←これはなくても良い)" </value></code>
        <code>  } </code>
      </pre>
    </section>

    <section class="slide center-text">
      <h3 class="">3. webpack2でバベる</h3>
      <p class="f30">最後に実行してみましょう！</p>
      <pre class="">
        <code>  <comment>// webpack2の起動</comment></code>
        <code>  $ <key>npm</key> run <value>build</value></code>
        <code>  ...</code>
        <code>  <comment>bundle.js  3.27 kB       0  [emitted]  main</comment></code>
        <code>  <comment>   [0] ./js/es6.js 642 bytes {0} [built]</comment></code>
        <code>  <comment>// これ以降勝手にビルドが走ります</comment></code>
      </pre>
    </section>

    <section class="slide center-text">
      <h3 class="h-center">他にも色々ありますので、皆さんのお好きな方法でバベって下さい( ﾟ∀ﾟ)</h3>
    </section>

    <section class="slide center-text">
      <h2 class="">参考リンク</h2>
      <ul>
        <li><a href="http://babeljs.io/docs/usage/cli/" target="_blank">babel-cli</a></li>
        <li><a href="https://www.npmjs.com/package/buble" target="_blank">buble</a></li>
        <li><a href="https://github.com/gulpjs/gulp/blob/master/docs/getting-started.md" target="_blank">gulp</a></li>
        <li><a href="https://webpack.js.org/guides/get-started/" target="_blank">webpack2</a></li>
        <li><a href="http://qiita.com/aggre/items/6f5d5d710a9e53bc77e8" target="_blank">もうBabelじゃない - Bubleだ。</a></li>
        <li><a href="http://qiita.com/tonkotsuboy_com/items/2d4f3862e6d05dc0bea1" target="_blank">Gulpで始めるwebpack 2入門</a></li>
      </ul>
    </section>

    <section class="slide center-text">
      <h2 class="shout">3. 最近のES界隈</h2>
      <p class="codicil next">完全に余談ですw</p>
    </section>

    <section class="slide center-text">
      <h3 class="">最近のES界隈</h3>
      <ul class="f30">
        <li>既にES2016, ES2017は公開、各ブラウザが随時対応中</li>
        <li>実際のサービスでES2017まで導入されている事例もあり</li>
        <li>babel, bubleも対応してきている</li>
      </ul>
      <p class="f30">乗り遅れないように！</p>
    </section>

    <section class="slide center-text">
      <h3>次回は…</h3>
      <h2 class="shout">「JavaScriptにおける<br>ユニットテスト」</h2>
    </section>

    <section class="slide center-text">
      <h2 class="shout">お疲れ様でした！！</h2>
    </section>

    <script src="../../../shower/shower.min.js"></script>
  </body>
</html>
